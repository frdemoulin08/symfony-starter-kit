{% set columns = [
    { label: 'Nom du site', sort: 'name' },
    { label: 'Commune', sort: 'city' },
    { label: 'Capacité', sort: 'capacity' },
    { label: 'Statut', sort: 'status' },
    { label: 'Mise à jour', sort: 'updatedAt' },
    { label: 'Actions' }
] %}

<div class="relative overflow-x-auto rounded-base border border-default bg-neutral-primary-soft shadow-xs">
    <table class="w-full text-left text-sm text-body">
        {% include '_partials/table/_header.html.twig' with {
            route: 'app_admin_sites_index',
            params: params,
            columns: columns
        } %}
        <tbody class="divide-y divide-neutral-secondary-soft bg-neutral-primary">
            {% for site in pager %}
                <tr class="border-b border-default bg-neutral-primary-soft hover:bg-neutral-secondary-medium cursor-pointer" data-row-link="{{ path('app_admin_sites_show', { id: site.id }) }}">
                    <th scope="row" class="px-6 py-4 font-semibold text-heading whitespace-nowrap">{{ site.name }}</th>
                    <td class="px-6 py-4">{{ site.city }}</td>
                    <td class="px-6 py-4">{{ site.capacity ?? '—' }}</td>
                    <td class="px-6 py-4">{{ site.status }}</td>
                    <td class="px-6 py-4">{{ site.updatedAt|date('d/m/Y') }}</td>
                    <td class="px-6 py-4 text-center">
                        <div class="relative flex justify-center">
                            <button
                                id="site-actions-{{ site.id }}"
                                type="button"
                                class="inline-flex h-9 w-9 items-center justify-center rounded-base border border-default bg-neutral-primary-soft text-sm font-medium text-body hover:bg-neutral-secondary-medium hover:text-heading focus:outline-none"
                                data-dropdown-toggle="site-actions-menu-{{ site.id }}"
                                aria-label="Ouvrir les actions"
                            >
                                <span aria-hidden="true">…</span>
                            </button>
                            <div id="site-actions-menu-{{ site.id }}" class="z-10 hidden w-44 rounded-base border border-default-medium bg-neutral-primary-medium shadow-lg">
                                <ul class="p-2 text-sm font-medium text-body" aria-labelledby="site-actions-{{ site.id }}">
                                    <li>
                                        <a href="{{ path('app_admin_sites_show', { id: site.id }) }}" class="inline-flex w-full items-center rounded px-2 py-2 hover:bg-neutral-tertiary-medium hover:text-heading">
                                            Voir
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{{ path('app_admin_sites_edit', { id: site.id }) }}" class="inline-flex w-full items-center rounded px-2 py-2 hover:bg-neutral-tertiary-medium hover:text-heading">
                                            Éditer
                                        </a>
                                    </li>
                                    <li>
                                        <button
                                            type="button"
                                            class="inline-flex w-full items-center rounded px-2 py-2 font-medium text-fg-danger hover:bg-neutral-tertiary-medium"
                                            data-modal-target="site-delete-modal"
                                            data-modal-toggle="site-delete-modal"
                                            data-delete-url="{{ path('app_admin_sites_delete', { id: site.id }) }}"
                                            data-delete-name="{{ site.name }}"
                                        >
                                            Supprimer
                                        </button>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td class="px-6 py-6 text-center text-sm text-body-subtle" colspan="{{ columns|length }}">Aucun site ne correspond à votre recherche.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% include '_partials/table/_pagination.html.twig' with { route: 'app_admin_sites_index', params: params, pager: pager } %}
